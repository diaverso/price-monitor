<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Precios</title>
    <meta name="i18n-title" content="priceChart.title">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f7fa; min-height: 100vh; padding: 20px; }
        .main-layout { display: flex; max-width: 1400px; margin: 0 auto; gap: 20px; }
        .sidebar-ad { flex: 0 0 300px; position: sticky; top: 20px; height: fit-content; }
        .container { flex: 1; min-width: 0; }
        @media (max-width: 968px) { .main-layout { flex-direction: column; } .sidebar-ad { flex: 1; position: static; width: 100%; } }
        .header { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .header-content { display: flex; gap: 20px; align-items: start; }
        .product-image { width: 150px; height: 150px; object-fit: contain; border-radius: 8px; border: 1px solid #e0e0e0; }
        .product-info { flex: 1; }
        .header h1 { color: #333; margin-bottom: 10px; }
        .header .url { color: #667eea; font-size: 14px; word-break: break-all; }
        .discount-badge { display: inline-block; background: #ffebee; color: #f44336; padding: 8px 16px; border-radius: 20px; font-weight: 600; font-size: 14px; margin-top: 10px; margin-right: 10px; }
        .original-price { color: #999; text-decoration: line-through; font-size: 16px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .stat-label { color: #666; font-size: 12px; text-transform: uppercase; margin-bottom: 8px; }
        .stat-value { color: #333; font-size: 28px; font-weight: 700; }
        .stat-change { margin-top: 8px; font-size: 14px; }
        .stat-change.positive { color: #f44336; }
        .stat-change.negative { color: #4CAF50; }
        .chart-container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .period-selector { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .period-btn { padding: 8px 16px; background: #f0f0f0; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
        .period-btn:hover { background: #e0e0e0; }
        .period-btn.active { background: #667eea; color: white; }
        .page-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 30px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .page-header .header-controls { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; margin-bottom: 0; }
        .page-header .btn-back { background: rgba(255,255,255,0.2); border: 2px solid white; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; transition: all 0.3s; font-weight: 600; }
        .page-header .btn-back:hover { background: white; color: #667eea; }
        .loading { text-align: center; padding: 40px; color: #666; }
        .error { background: #ffebee; color: #c62828; padding: 20px; border-radius: 8px; text-align: center; }
    </style>
    <script src="js/i18n.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4403585481892342"
         crossorigin="anonymous"></script>
</head>
<body>
    <div class="main-layout">
        <!-- Sidebar Izquierdo con AdSense -->
        <aside class="sidebar-ad">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-4403585481892342"
                 data-ad-slot="1234567890"
                 data-ad-format="vertical"
                 data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </aside>

        <!-- Contenido Principal -->
        <div class="container">
            <div class="page-header">
            <div class="header-controls">
                <a href="dashboard.html" class="btn-back" data-i18n="priceChart.backToDashboard">← Volver al Dashboard</a>
                <div id="language-selector"></div>
                <div id="issues-selector"></div>
            </div>
            </div>
        <div id="loadingContainer" class="loading"><span data-i18n="priceChart.loading">Cargando historial de precios...</span></div>
        <div id="errorContainer" class="error" style="display: none;"></div>
        <div id="contentContainer" style="display: none;">
            <div class="header">
                <div class="header-content">
                    <img id="productImage" class="product-image" style="display: none;" alt="Producto">
                    <div class="product-info">
                        <h1 id="productName">Cargando...</h1>
                        <a id="productUrl" href="#" target="_blank" class="url"></a>
                        <div id="productMeta" style="margin-top: 10px;"></div>
                    </div>
                </div>
            </div>
            <div class="period-selector">
                <button class="period-btn" data-period="7" data-i18n="priceChart.days7">7 días</button>
                <button class="period-btn active" data-period="30" data-i18n="priceChart.days30">30 días</button>
                <button class="period-btn" data-period="90" data-i18n="priceChart.days90">90 días</button>
                <button class="period-btn" data-period="180" data-i18n="priceChart.months6">6 meses</button>
                <button class="period-btn" data-period="365" data-i18n="priceChart.year1">1 año</button>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-label" data-i18n="priceChart.currentPrice">Precio Actual</div><div class="stat-value" id="currentPrice">--</div></div>
                <div class="stat-card"><div class="stat-label" data-i18n="priceChart.targetPrice">Precio Objetivo</div><div class="stat-value" id="targetPrice">--</div></div>
                <div class="stat-card"><div class="stat-label" data-i18n="priceChart.minPrice">Precio Mínimo</div><div class="stat-value" id="minPrice">--</div></div>
                <div class="stat-card"><div class="stat-label" data-i18n="priceChart.maxPrice">Precio Máximo</div><div class="stat-value" id="maxPrice">--</div></div>
                <div class="stat-card"><div class="stat-label" data-i18n="priceChart.avgPrice">Precio Promedio</div><div class="stat-value" id="avgPrice">--</div></div>
                <div class="stat-card"><div class="stat-label" data-i18n="priceChart.totalChange">Cambio Total</div><div class="stat-value" id="changeAmount">--</div><div class="stat-change" id="changePercent">--</div></div>
            </div>
            <div class="chart-container"><canvas id="priceChart"></canvas></div>
        </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="js/price-chart.js?v=4"></script>
</body>
</html>
